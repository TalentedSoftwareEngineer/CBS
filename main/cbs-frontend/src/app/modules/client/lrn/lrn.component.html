<h4 class="page_title">LRN Management</h4>
<div class="card">
    <div class="grid">
        <div class="col-12 md:col-8">
            <div class="grid">        
                <div class="col-12 md:col-5 pl-0 pr-0">
                    <div class="p-inputgroup">
                        <input type="text" pInputText placeholder="Keyword..." [(ngModel)]="filterValue" (keyup.enter)="onClickFilter()">
                        <button type="button" pButton pRipple label="Search" icon="pi pi-search" (click)="onClickFilter()"></button>
                    </div>
                </div>
            </div>
        </div>

        <!-- <div class="col-12 md:col-4 text-right">
            <span class="p-buttonset">
                <button pButton pRipple label="Add New" (click)="openModal('Add')" icon="pi pi-plus"></button>
                <button pButton pRipple label="Upload" (click)="flag_openUploadDialog=true" icon="pi pi-upload" class="p-button-help"></button>            
            </span>
        </div> -->
    </div>
</div>

<div class="card">
  <!-- <h5><span *ngIf="resultsLength!=-1">Total {{resultsLength}} Record</span><span *ngIf="resultsLength>1">s</span><i *ngIf="resultsLength>0&&filterResultLength>0&&filterResultLength<resultsLength" style="font-size: medium;">, {{filterResultLength}} Record<span *ngIf="filterResultLength>1">s</span> Filtered</i></h5> -->
  <p-table [value]="lrns" responsiveLayout="stack" [responsive]="true">
    <ng-template pTemplate="header">
      <tr>
        <th class="text-align-center" [ngClass]="sortActive === 'calling' ? 'sorting_' + sortDirection.toLowerCase() :'sorting'">
          <a (click)="onSortChange('calling')">Calling</a>
        </th>
        <th class="text-align-center" [ngClass]="sortActive === 'translated' ? 'sorting_' + sortDirection.toLowerCase() :'sorting'">
          <a (click)="onSortChange('translated')">Translated</a>
        </th>
        <th class="text-align-center" [ngClass]="sortActive === 'lata' ? 'sorting_' + sortDirection.toLowerCase() :'sorting'">
          <a (click)="onSortChange('lata')">Lata</a>
        </th>
        <th class="text-align-center" [ngClass]="sortActive === 'thousand' ? 'sorting_' + sortDirection.toLowerCase() :'sorting'">
          <a (click)="onSortChange('thousand')">Thousand</a>
        </th>
        <!-- <th class="text-align-center" [ngClass]="sortActive === 'created_at' ? 'sorting_' + sortDirection.toLowerCase() :'sorting'">
          <a (click)="onSortChange('created_at')">Created At</a>
        </th>
        <th class="text-align-center" [ngClass]="sortActive === 'updated_at' ? 'sorting_' + sortDirection.toLowerCase() :'sorting'">
            <a (click)="onSortChange('updated_at')">Updated At</a>
        </th>
        <th class="text-align-center" [ngClass]="sortActive === 'created_by' ? 'sorting_' + sortDirection.toLowerCase() :'sorting'">
          <a (click)="onSortChange('created_by')">Created By</a>
        </th>
        <th class="text-align-center" [ngClass]="sortActive === 'updated_by' ? 'sorting_' + sortDirection.toLowerCase() :'sorting'">
            <a (click)="onSortChange('updated_by')">Updated By</a>
        </th>
        <th class="text-align-center">Action</th> -->
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-npanxx_item>
      <tr>
        <td class="text-align-center">
          <span class="p-column-title">Calling</span>
          {{ npanxx_item.calling | phoneFormat }}
        </td>
        <td class="text-align-center">
          <span class="p-column-title">Translated</span>
          {{ npanxx_item.translated | phoneFormat}}
        </td>
        <td class="text-align-center">
          <span class="p-column-title">Lata</span>
          {{ npanxx_item.lata }}
        </td>
        <td class="text-align-center">
          <span class="p-column-title">Thousand</span>
          {{ npanxx_item.thousand }}
        </td>
        <!-- <td class="text-align-center">
          <span class="p-column-title">Created At</span>
          {{ npanxx_item.created_at }}
        </td>
        <td class="text-align-center">
          <span class="p-column-title">Updated At</span>
          {{ npanxx_item.updated_at }}
        </td>
        <td class="text-align-center">
          <span class="p-column-title">Created By</span>
          {{ npanxx_item.created_by }}
        </td>
        <td class="text-align-center">
          <span class="p-column-title">Updated By</span>
          {{ npanxx_item.updated_by }}
        </td>
        <td class="text-align-center">
          <span class="p-buttonset">
            <button pButton type="button" title="Edit" icon="pi pi-pencil" class="p-button-rounded p-button-outlined p-button-warning" (click)="onOpenEditModal($event, npanxx_item.id)"></button>
            <button pButton type="button" title="Delete" icon="pi pi-trash" class="p-button-rounded p-button-outlined p-button-danger" (click)="delete($event, npanxx_item.id)"></button>
          </span>
        </td> -->
      </tr>
    </ng-template>
  </p-table>

  <p-paginator [rows]="pageSize" [totalRecords]="filterResultLength" [rowsPerPageOptions]="rowsPerPageOptions" (onPageChange)="paginate($event)"></p-paginator>
</div>

<p-dialog [header]="modalTitle + ' '" styleClass="c-modal" [(visible)]="flag_openDialog" (onHide)="closeModal()" [breakpoints]="{'960px': '75vw', '640px': '100vw'}" [style]="{width: '60vw'}" [modal]="true" [draggable]="false" [resizable]="false">
  <div class="pt-2">
      <form [formGroup]="lrnForm" (ngSubmit)="onSubmit()">
        <div class="grid p-fluid">
          <div class="md:col-6 col-12">
            <span class="p-float-label">
              <p-inputMask class="form-control" id="calling" formControlName="calling" mask="999-999-9999" [(ngModel)]="inputCalling" class="{{isLrnFormFieldValid('calling') ? 'ng-invalid ng-dirty' : ''}}"></p-inputMask>
              <label for="calling">Calling</label>
            </span>
          </div>
          <div class="md:col-6 col-12">
            <span class="p-float-label">
              <p-inputMask class="form-control" id="translated" formControlName="translated" mask="999-999-9999" [(ngModel)]="inputTranslated" class="{{isLrnFormFieldValid('translated') ? 'ng-invalid ng-dirty' : ''}}"></p-inputMask>
              <label for="translated">Translated</label>
            </span>
          </div>
          <div class="md:col-6 col-12">
            <span class="p-float-label">
              <input type="text" class="form-control" id="lata" formControlName="lata" pInputText [(ngModel)]="inputLata" class="{{isLrnFormFieldValid('lata') ? 'ng-invalid ng-dirty' : ''}}">
              <label for="lata">Lata</label>
            </span>
          </div>
          <div class="md:col-6 col-12">
            <span class="p-float-label">
              <input type="text" class="form-control" id="thousand" formControlName="thousand" pInputText [(ngModel)]="inputThousand" class="{{isLrnFormFieldValid('thousand') ? 'ng-invalid ng-dirty' : ''}}">
              <label for="thousand">Thousand</label>
            </span>
          </div>
        </div>

        <div class="flex justify-content-end">
          <button type="submit" pButton pRipple label="Save" icon="pi pi-save" class="p-button-text"></button>
        </div>
      </form>
  </div>
</p-dialog>

<!-- <p-dialog header="Upload" styleClass="c-modal" [(visible)]="flag_openUploadDialog" (onHide)="flag_openUploadDialog=false" [breakpoints]="{'960px': '75vw', '640px': '100vw'}" [style]="{width: '70vw'}" [modal]="true" [draggable]="false" [resizable]="false">
  <div class="grid pt-2">
    <div class="p-fluid lg:col-8 col-12">
      <span class="field p-float-label">
        <p-dropdown [options]="uploadActionOptions" id="uploadMethod" [(ngModel)]="uploadMethod" optionLabel="name" optionValue="value" scrollHeight="150px"></p-dropdown>
        <label>Action</label>
      </span>
    </div>
    <div class="lg:col-4 col-12 text-right">
      <button pButton pRipple label="Choose File" (click)="fileInput.click()" [disabled]="isUpLoading" icon="pi pi-upload" class="p-button-text"></button>
      <input #fileInput type="file" (click)="onClickUpload($event)" (change)="changeListener($event)" style="display: none" accept=".csv"/>
    </div>
  </div>

  <strong>*The csv file format must be the same as the following table format.</strong>
  <div class="card mt-5">
    <p-table [value]="uploadDemoContent" [scrollable]="true">
      <ng-template pTemplate="header">
        <tr>
          <th style="min-width:100px" class="text-center justify-content-center">Calling</th>
          <th style="min-width:100px" class="text-center justify-content-center">Translated</th>
          <th style="min-width:100px" class="text-center justify-content-center">Lata</th>
          <th style="min-width:100px" class="text-center justify-content-center">Thousand</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-upload>
        <tr>
          <td style="min-width:100px" class="text-center justify-content-center">{{upload.calling}}</td>
          <td style="min-width:100px" class="text-center justify-content-center">{{upload.translated}}</td>
          <td style="min-width:100px" class="text-center justify-content-center">{{upload.lata}}</td>
          <td style="min-width:100px" class="text-center justify-content-center">{{upload.thousand}}</td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</p-dialog> -->
